{% extends "base.html" %}
{% block title %}Q&A{% endblock %}

{% block content %}
  <div class="page-title">
    <h1>Q&amp;A</h1>
    <span class="badge">Last answer only</span>
  </div>

  <div class="card">
    <form method="post">
      {% csrf_token %}
      <label class="muted" for="question">Question</label>
      <input id="question" name="question" type="text" placeholder="e.g. Which apps are candidates for decommissioning?" />

      <div style="margin-top:12px;">
        <button class="btn btn-primary" type="submit">Ask</button>
      </div>
    </form>

    {% if error %}
      <p style="color:red; font-weight:800; margin-top:12px;">{{ error }}</p>
    {% endif %}
  </div>

  <div class="grid-2">
    <div class="card">
      <h3>Last question</h3>
      {% if last_question %}
        <p style="margin:0;"><strong>{{ last_question }}</strong></p>
      {% else %}
        <p class="muted" style="margin:0;">No question yet.</p>
      {% endif %}
    </div>

    <div class="card">
      <h3>Answer</h3>
      {% if last_answer %}
        <pre style="white-space: pre-wrap; margin:0;">{{ last_answer }}</pre>
      {% else %}
        <p class="muted" style="margin:0;">No answer yet.</p>
      {% endif %}
    </div>
  </div>

  {% if linked_apps %}
    <div class="card">
      <h3>Linked applications</h3>
      <ul style="margin:0;">
        {% for a in linked_apps %}
          <li><a href="{% url 'app_detail' a.id %}">{{ a.name }}</a></li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}
{% endblock %}